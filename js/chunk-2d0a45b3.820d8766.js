(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d0a45b3"],{"05a9":function(e,t,a){"use strict";a.r(t);a("ac6a"),a("96cf");var r,l,o,s,i,n=a("3b8d"),c=(a("7f7f"),a("b946")),d={computed:{buyPrice:function(){return this.addForm.productList.reduce(function(e,t){return e+t.buyPrice*t.quantity},0)},sellPrice:function(){return this.addForm.productList.reduce(function(e,t){return e+t.sellPrice*t.quantity},0)},realPrice:function(){return this.addForm.alipayMoney+this.addForm.wechatMoney+this.addForm.payCardMoney+this.addForm.cashMoney}},data:function(){return{isShowAdd:!1,form:{symbol:"",is_upgrade:0,state:0},rules:{serialNumber:[{required:!0,message:"该项不为空!",trigger:"blur"}],cusName:[{required:!0,message:"该项不为空!",trigger:"blur"}],name:[{required:!0,message:"必选!",trigger:"change"}],useTag:[{required:!0,message:"必选!",trigger:"change"}],licenceNumber:[{required:!0,message:"该项不为空!",trigger:"blur"}],quantity:[{type:"number",message:"该项为数字!",trigger:"blur"}],sellPrice:[{required:!0,type:"number",message:"该项为数字!",trigger:"blur"}],cashMoney:[{required:!0,type:"number",message:"该项为数字!",trigger:"blur"}],payCardMoney:[{required:!0,type:"number",message:"该项为数字!",trigger:"blur"}],wechatMoney:[{required:!0,type:"number",message:"该项为数字!",trigger:"blur"}],alipayMoney:[{required:!0,type:"number",message:"该项为数字!",trigger:"blur"}],allMoney:[{required:!0,type:"number",message:"该项为数字!",trigger:"blur"}]},addP:{productId:"",name:"",type:"",tag:"",useTag:"",year:"",quantity:"",serialNumber:"",buyPrice:"",sellPrice:""},pList:[],cList:[],comList:[],sellList:[],customerList:[],receiverList:[],workerList:[],addForm:{id:"",licenceNumber:"",frameNumber:"",engineNumber:"",insuranceAt:"",vehicleModel:"",color:"",produceAt:"",cusName:"",sex:"",tel:"",wechat:"",des:"",productList:[],cashMoney:0,payCardMoney:0,wechatMoney:0,alipayMoney:0,allMoney:0,companyId:"",company:"",salespersonId:"",salespersonName:"",salesperson:"",companyName:"",workerName:"",receiverName:""}}},methods:{chooseSales:function(){var e=this.sellList[this.addForm.salesperson];this.addForm.salespersonId=e.id,this.addForm.salespersonName=e.name},chooseCompany:(i=Object(n.a)(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.comList[this.addForm.company],this.addForm.campanyId=t.id,this.addForm.campanyName=t.companyName,e.next=5,Object(c.j)(this.addForm.campanyId);case 5:a=e.sent,this.sellList=a;case 7:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)}),searchCustomer:(s=Object(n.a)(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.e)(this.addForm.cusName);case 2:t=e.sent,e.t0=regeneratorRuntime.keys(t[0]);case 4:if((e.t1=e.t0()).done){e.next=12;break}if(a=e.t1.value,void 0===this.addForm[a]){e.next=10;break}if("licenceNumber"===a)return e.abrupt("continue",4);e.next=9;break;case 9:this.addForm[a]=t[0][a];case 10:e.next=4;break;case 12:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)}),chooseProduct:function(){var e=this.pList[this.addP.name];for(var t in e)"id"===t&&(this.addP.productId=e[t]),void 0!==this.addP[t]&&(this.addP[t]=e[t])},searchCar:(o=Object(n.a)(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.c)(this.addForm.licenceNumber);case 2:for(a in(t=e.sent)[0])void 0!==this.addForm[a]&&(this.addForm[a]=t[0][a]);case 4:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)}),delP:function(e){this.addForm.productList.splice(e,1)},subP:function(){var t=this,a=this;this.$refs.subP.validate(function(e){if(!e)return!1;a.addForm.productList.push(JSON.parse(JSON.stringify(t.addP)))})},handleChange:(l=Object(n.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(t=this).$refs.ruleForm.validate(function(e){if(!e)return!1;t.addForm.allMoney=t.realPrice,Object(c.a)(t.addForm).then(function(e){0===e.status?(t.$message({message:"添加成功",type:"success"}),t.isShowAdd=!1,t.$emit("add")):t.$message({message:"添加失败",type:"error"})})});case 2:case"end":return e.stop()}},e,this)})),function(){return l.apply(this,arguments)}),handleAdd:(r=Object(n.a)(regeneratorRuntime.mark(function e(){var t,a,r,l,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.c)("");case 2:return t=e.sent,e.next=5,Object(c.e)("");case 5:return a=e.sent,e.next=8,Object(c.g)("");case 8:return r=e.sent,e.next=11,Object(c.d)();case 11:return l=e.sent,e.next=14,Object(c.i)();case 14:return o=e.sent,e.next=17,Object(c.k)();case 17:s=e.sent,this.workerList=s,this.receiverList=o,this.comList=l,this.pList=r,this.cList=t,this.customerList=a,this.isShowAdd=!0;case 26:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)}),handleFormSubmit:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return t.$message.error({title:"错误",message:"请输入姓名!"}),!1;t.$emit("submit",t.form)})},handleFormReset:function(){this.$refs.form.resetFields(),this.$emit("reset")}}},m=a("2877"),u=function(e){e.options.__source="src/views/business/order/componnets/PageHeader/index.vue"},p=Object(m.a)(d,function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("div",[r("el-form",{ref:"form",staticStyle:{"margin-bottom":"-18px"},attrs:{inline:!0,model:a.form,size:"mini"}},[r("el-form-item",{attrs:{label:"订单号/手机号",prop:"symbol"}},[r("el-input",{staticStyle:{width:"120px"},attrs:{placeholder:"..."},model:{value:a.form.symbol,callback:function(e){a.$set(a.form,"symbol",e)},expression:"form.symbol"}})],1),r("el-form-item",{attrs:{label:"是否升级",prop:"type"}},[r("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"状态选择"},model:{value:a.form.is_upgrade,callback:function(e){a.$set(a.form,"is_upgrade",e)},expression:"form.is_upgrade"}},[r("el-option",{attrs:{label:"全部",value:0}}),r("el-option",{attrs:{label:"升级",value:1}}),r("el-option",{attrs:{label:"未升级",value:2}})],1)],1),r("el-form-item",{attrs:{label:"是否作废",prop:"type"}},[r("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"状态选择"},model:{value:a.form.state,callback:function(e){a.$set(a.form,"state",e)},expression:"form.state"}},[r("el-option",{attrs:{label:"全部",value:0}}),r("el-option",{attrs:{label:"未作废",value:1}}),r("el-option",{attrs:{label:"作废",value:2}})],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:a.handleFormSubmit}},[r("d2-icon",{attrs:{name:"search"}}),a._v("\n        查询\n      ")],1)],1),r("el-form-item",[r("el-button",{on:{click:a.handleFormReset}},[r("d2-icon",{attrs:{name:"refresh"}}),a._v("\n        重置\n      ")],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:a.handleAdd}},[r("d2-icon",{attrs:{name:"user"}}),a._v("\n        新增订单\n      ")],1)],1)],1),r("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"新增订单",visible:a.isShowAdd,width:"84%"},on:{"update:visible":function(e){a.isShowAdd=e}}},[r("el-timeline",[r("el-timeline-item",{attrs:{timestamp:"用户信息填写&车辆信息填写",placement:"top"}},[r("el-row",{attrs:{gutter:12}},[r("el-col",{attrs:{span:12}},[r("el-card",[r("el-divider",{attrs:{"content-position":"right"}},[a._v("用户")]),r("el-form",{attrs:{model:a.addForm,"label-width":"80px","label-position":"right"}},[r("el-form-item",{attrs:{label:"顾客姓名",prop:"password"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"","allow-create":"",placeholder:"请选择"},on:{change:a.searchCustomer},model:{value:a.addForm.cusName,callback:function(e){a.$set(a.addForm,"cusName",e)},expression:"addForm.cusName"}},a._l(a.customerList,function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.name}})}),1)],1),r("el-form-item",{attrs:{label:"电话",prop:"wechat"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:a.addForm.tel,callback:function(e){a.$set(a.addForm,"tel",e)},expression:"addForm.tel"}})],1),r("el-form-item",{attrs:{label:"微信",prop:"idCard"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:a.addForm.wechat,callback:function(e){a.$set(a.addForm,"wechat",e)},expression:"addForm.wechat"}})],1),r("el-form-item",{attrs:{label:"合作公司",prop:"idCard"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},on:{change:a.chooseCompany},model:{value:a.addForm.company,callback:function(e){a.$set(a.addForm,"company",e)},expression:"addForm.company"}},a._l(a.comList,function(e,t){return r("el-option",{key:t,attrs:{label:e.companyName,value:t}})}),1)],1),r("el-form-item",{attrs:{label:"销售姓名",prop:"wechat"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},on:{change:a.chooseSales},model:{value:a.addForm.salesperson,callback:function(e){a.$set(a.addForm,"salesperson",e)},expression:"addForm.salesperson"}},a._l(a.sellList,function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:t}})}),1)],1),r("el-form-item",{staticStyle:{height:"28px"},attrs:{label:"",prop:"idCard"}})],1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-card",[r("el-divider",{attrs:{"content-position":"right"}},[a._v("车辆信息")]),r("el-form",{attrs:{model:a.addForm,"label-width":"120px","label-position":"right"}},[r("el-form-item",{attrs:{label:"车牌号",prop:"symbol"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{"allow-create":"",filterable:"",placeholder:"请选择"},on:{change:a.searchCar},model:{value:a.addForm.licenceNumber,callback:function(e){a.$set(a.addForm,"licenceNumber",e)},expression:"addForm.licenceNumber"}},a._l(a.cList,function(e,t){return r("el-option",{key:t,attrs:{label:e.licenceNumber,value:e.licenceNumber}})}),1)],1),r("el-form-item",{attrs:{label:"车架号",prop:"tel"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:a.addForm.frameNumber,callback:function(e){a.$set(a.addForm,"frameNumber",e)},expression:"addForm.frameNumber"}})],1),r("el-form-item",{attrs:{label:"车型",prop:"wechat"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:a.addForm.vehicleModel,callback:function(e){a.$set(a.addForm,"vehicleModel",e)},expression:"addForm.vehicleModel"}})],1),r("el-form-item",{attrs:{label:"颜色",prop:"idCard"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:a.addForm.color,callback:function(e){a.$set(a.addForm,"color",e)},expression:"addForm.color"}})],1),r("el-form-item",{attrs:{label:"出厂日期"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"出厂日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:a.addForm.produceAt,callback:function(e){a.$set(a.addForm,"produceAt",e)},expression:"addForm.produceAt"}})],1),r("el-form-item",{attrs:{label:"保险到期"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"保险到期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:a.addForm.insuranceAt,callback:function(e){a.$set(a.addForm,"insuranceAt",e)},expression:"addForm.insuranceAt"}})],1)],1)],1)],1)],1)],1),r("el-timeline-item",{attrs:{timestamp:"使用产品填写",placement:"top"}},[r("el-card",[r("el-divider",{attrs:{"content-position":"right"}},[a._v("购置产品")]),r("el-form",{ref:"subP",attrs:{inline:!0,model:a.addP,"label-width":"90px",rules:a.rules,"label-position":"right"}},[r("el-form-item",{attrs:{label:"产品名字",prop:"name"}},[r("el-select",{staticStyle:{width:"100px"},attrs:{filterable:"",placeholder:"请选择"},on:{change:a.chooseProduct},model:{value:a.addP.name,callback:function(e){a.$set(a.addP,"name",e)},expression:"addP.name"}},a._l(a.pList,function(e,t){return r("el-option",{key:t,attrs:{label:e.name+"-"+e.type,value:t}})}),1)],1),r("el-form-item",{attrs:{label:"使用部位",prop:"useTag"}},[r("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},model:{value:a.addP.useTag,callback:function(e){a.$set(a.addP,"useTag",e)},expression:"addP.useTag"}},[r("el-option",{attrs:{value:"前档"}}),r("el-option",{attrs:{value:"四门+前档"}}),r("el-option",{attrs:{value:"后档"}}),r("el-option",{attrs:{value:"左前门"}}),r("el-option",{attrs:{value:"左后门"}}),r("el-option",{attrs:{value:"右前门"}}),r("el-option",{attrs:{value:"右后门"}}),r("el-option",{attrs:{value:"四门+后档+左后门+右后门"}})],1)],1),r("el-form-item",{attrs:{label:"膜卷编号",prop:"serialNumber"}},[r("el-input",{staticStyle:{width:"100px"},attrs:{autocomplete:"off"},model:{value:a.addP.serialNumber,callback:function(e){a.$set(a.addP,"serialNumber",e)},expression:"addP.serialNumber"}})],1),r("el-form-item",{attrs:{label:"数量",prop:"quantity"}},[r("el-input",{staticStyle:{width:"100px"},attrs:{autocomplete:"off"},model:{value:a.addP.quantity,callback:function(e){a.$set(a.addP,"quantity",a._n(e))},expression:"addP.quantity"}})],1),r("el-form-item",{attrs:{label:" ",prop:"symbol"}},[r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:a.subP}},[a._v("添加")])],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:a.addForm.productList}},[r("el-table-column",{attrs:{prop:"name",label:"产品名字"}}),r("el-table-column",{attrs:{prop:"type",label:"产品类型"}}),r("el-table-column",{attrs:{prop:"tag",label:"标签"}}),r("el-table-column",{attrs:{prop:"useTag",label:"使用部位"}}),r("el-table-column",{attrs:{prop:"quantity",label:"数量"}}),r("el-table-column",{attrs:{prop:"serialNumber",label:"膜卷号"}}),r("el-table-column",{attrs:{prop:"sellPrice",label:"价格"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:a._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return a.delP(t.$index)}}},[a._v("删除")])]}}])})],1)],1)],1),r("el-timeline-item",{attrs:{timestamp:"结算",placement:"top"}},[r("el-row",[r("el-col",{attrs:{span:24}},[r("el-card",[r("el-divider",{attrs:{"content-position":"right"}},[a._v("结算")]),r("el-form",{ref:"ruleForm",attrs:{model:a.addForm,inline:!0,rules:a.rules,"label-width":"120px","label-position":"right"}},[r("el-form-item",{attrs:{label:"现金支付金额",prop:"cashMoney"}},[r("el-input",{staticStyle:{width:"120px"},attrs:{autocomplete:"off"},model:{value:a.addForm.cashMoney,callback:function(e){a.$set(a.addForm,"cashMoney",a._n(e))},expression:"addForm.cashMoney"}})],1),r("el-form-item",{attrs:{label:"刷卡支付金额",prop:"payCardMoney"}},[r("el-input",{staticStyle:{width:"120px"},attrs:{autocomplete:"off"},model:{value:a.addForm.payCardMoney,callback:function(e){a.$set(a.addForm,"payCardMoney",a._n(e))},expression:"addForm.payCardMoney"}})],1),r("el-form-item",{attrs:{label:"微信支付金额",prop:"wechatMoney"}},[r("el-input",{staticStyle:{width:"120px"},attrs:{autocomplete:"off"},model:{value:a.addForm.wechatMoney,callback:function(e){a.$set(a.addForm,"wechatMoney",a._n(e))},expression:"addForm.wechatMoney"}})],1),r("el-form-item",{attrs:{label:"支付宝支付金额",prop:"alipayMoney"}},[r("el-input",{staticStyle:{width:"120px"},attrs:{autocomplete:"off"},model:{value:a.addForm.alipayMoney,callback:function(e){a.$set(a.addForm,"alipayMoney",a._n(e))},expression:"addForm.alipayMoney"}})],1),r("el-form-item",{attrs:{label:"成本价",prop:"idCard"}},[r("el-input",{staticStyle:{width:"120px"},attrs:{readonly:"",autocomplete:"off"},model:{value:a.buyPrice,callback:function(e){a.buyPrice=e},expression:"buyPrice"}})],1),r("el-form-item",{attrs:{label:"应售价",prop:"wechat"}},[r("el-input",{staticStyle:{width:"120px"},attrs:{readonly:"",autocomplete:"off"},model:{value:a.sellPrice,callback:function(e){a.sellPrice=e},expression:"sellPrice"}})],1),r("el-form-item",{attrs:{label:"实收价"}},[r("el-input",{staticStyle:{width:"120px"},attrs:{readonly:"",autocomplete:"off"},model:{value:a.realPrice,callback:function(e){a.realPrice=a._n(e)},expression:"realPrice"}})],1),r("el-form-item",{attrs:{label:"施工人员",prop:"idCard"}},[r("el-select",{staticStyle:{width:"120px"},attrs:{filterable:"",placeholder:"请选择"},on:{change:a.chooseProduct},model:{value:a.addForm.workerName,callback:function(e){a.$set(a.addForm,"workerName",e)},expression:"addForm.workerName"}},a._l(a.workerList,function(e,t){return r("el-option",{key:t,attrs:{label:e.symbol,value:e.symbol}})}),1)],1),r("el-form-item",{attrs:{label:"店铺销售员",prop:"idCard"}},[r("el-select",{staticStyle:{width:"120px"},attrs:{filterable:"",placeholder:"请选择"},model:{value:a.addForm.receiverName,callback:function(e){a.$set(a.addForm,"receiverName",e)},expression:"addForm.receiverName"}},a._l(a.receiverList,function(e,t){return r("el-option",{key:t,attrs:{label:e.symbol,value:e.symbol}})}),1)],1)],1)],1)],1)],1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){a.isShowAdd=!1}}},[a._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:a.handleChange}},[a._v("确 定")])],1)],1)],1)},[],!1,null,null,null);"function"==typeof u&&u(p);t.default=p.exports}}]);