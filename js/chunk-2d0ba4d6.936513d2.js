(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d0ba4d6"],{3740:function(e,t,l){"use strict";l.r(t);l("8e6e"),l("ac6a"),l("456d");var a=l("bd86"),o=(l("96cf"),l("3b8d")),r=l("36b2");function n(t,e){var l=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),l.push.apply(l,a)}return l}function s(t){for(var e=1;e<arguments.length;e++){var l=null!=arguments[e]?arguments[e]:{};e%2?n(l,!0).forEach(function(e){Object(a.a)(t,e,l[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(l)):n(l).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(l,e))})}return t}var i,c,u={props:{tableData:{default:function(){return[]}},loading:{default:!1}},data:function(){return{isShowEdit:!1,addForm:{id:"",tel:"",role:"",symbol:"",password:"",idCard:"",sex:"",wechat:""},rules:{symbol:[{required:!0,message:"该项必填!",trigger:"blur"},{min:2,max:6,message:"长度在 2 到 6 个字符",trigger:"blur"}],tel:[{len:11,required:!0,message:"请输入有效电话!",trigger:"blur"}],idCard:[{len:18,required:!0,message:"请输入合法身份证!",trigger:"blur"}],wechat:[{required:!0,message:"该项必填!",trigger:"blur"}],sex:[{required:!0,message:"请选择性别!",trigger:"change"}],password:[{min:6,max:18,required:!0,message:"密码长度在6-18位",trigger:"blur"}],role:[{required:!0,message:"请选择角色!",trigger:"change"}]},currentTableData:[],multipleSelection:[],downloadColumns:[{label:"用户id",prop:"id"},{label:"性别",prop:"sex"},{label:"身份证",prop:"idCard"},{label:"姓名",prop:"symbol"},{label:"描述",prop:"des"},{label:"密码",prop:"password"},{label:"微信号",prop:"wechat"},{label:"角色",prop:"role"}]}},watch:{tableData:{handler:function(e){this.currentTableData=e},immediate:!0}},methods:{handleDelete:(c=Object(o.a)(regeneratorRuntime.mark(function e(t){var l,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(l=this).$confirm("此操作将可能造成严重后果, 是否继续?","危险操作提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(function(){Object(r.b)(t.id).then(function(e){0===e.status?(l.$message({message:"成功",type:"success"}),l.$emit("delete")):l.$message({message:"操作失败",type:"error"})})}).catch(function(){a.$message({type:"info",message:"已取消"})});case 2:case"end":return e.stop()}},e,this)})),function(e){return c.apply(this,arguments)}),handleChange:(i=Object(o.a)(regeneratorRuntime.mark(function e(){var t,l=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(t=this).$refs.ruleForm.validate(function(e){if(!e)return!1;Object(r.e)(l.addForm).then(function(e){0===e.status?(t.$message({message:"编辑成功",type:"success"}),t.isShowEdit=!1,t.$emit("add")):t.$message({message:"编辑失败",type:"error"})})});case 2:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)}),handleEdit:function(e){this.addForm=e,this.isShowEdit=!0},handleSwitchChange:function(e,t){var l=this.currentTableData[t];this.$set(this.currentTableData,t,s({},l,{type:e}))},handleSelectionChange:function(e){this.multipleSelection=e},downloadDataTranslate:function(e){return e.map(function(e){return s({},e,{type:e.type?"禁用":"正常",used:e.used?"已使用":"未使用"})})},handleDownloadXlsx:function(e){var t=this;this.$export.excel({title:"工作薄",columns:this.downloadColumns,data:this.downloadDataTranslate(e)}).then(function(){t.$message("导出表格成功")})},handleDownloadCsv:function(e){var t=this;this.$export.csv({title:"工作薄",columns:this.downloadColumns,data:this.downloadDataTranslate(e)}).then(function(){t.$message("导出CSV成功")})}}},d=l("2877"),p=function(e){e.options.__source="src/views/account/user/componnets/PageMain/index.vue"},m=Object(d.a)(u,function(){var l=this,e=l.$createElement,a=l._self._c||e;return a("div",[a("el-form",{attrs:{inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:"已选数据下载 [ "+l.currentTableData.length+" ]"}},[a("el-button-group",[a("el-button",{attrs:{type:"primary",size:"mini",disabled:0===l.currentTableData.length},on:{click:function(e){return l.handleDownloadXlsx(l.currentTableData)}}},[l._v("\n          xlsx\n        ")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:0===l.currentTableData.length},on:{click:function(e){return l.handleDownloadCsv(l.currentTableData)}}},[l._v("\n          csv\n        ")])],1)],1),a("el-form-item",{attrs:{label:"已选数据下载 [ "+l.multipleSelection.length+" ]"}},[a("el-button-group",[a("el-button",{attrs:{type:"primary",size:"mini",disabled:0===l.multipleSelection.length},on:{click:function(e){return l.handleDownloadXlsx(l.multipleSelection)}}},[l._v("\n          xlsx\n        ")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:0===l.multipleSelection.length},on:{click:function(e){return l.handleDownloadCsv(l.multipleSelection)}}},[l._v("\n          csv\n        ")])],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:l.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:l.currentTableData,size:"mini",stripe:""},on:{"selection-change":l.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"姓名","show-overflow-tooltip":!0},scopedSlots:l._u([{key:"default",fn:function(e){return[l._v("\n        "+l._s(e.row.symbol)+"\n      ")]}}])}),a("el-table-column",{attrs:{label:"电话号码","show-overflow-tooltip":!0},scopedSlots:l._u([{key:"default",fn:function(e){return[l._v("\n        "+l._s(e.row.tel)+"\n      ")]}}])}),a("el-table-column",{attrs:{label:"密码"},scopedSlots:l._u([{key:"default",fn:function(e){return[l._v("\n        "+l._s(e.row.password)+"\n      ")]}}])}),a("el-table-column",{attrs:{label:"微信号","show-overflow-tooltip":!0},scopedSlots:l._u([{key:"default",fn:function(e){return[l._v("\n        "+l._s(e.row.wechat)+"\n      ")]}}])}),a("el-table-column",{attrs:{label:"角色","show-overflow-tooltip":!0},scopedSlots:l._u([{key:"default",fn:function(e){return[l._v("\n        "+l._s(e.row.role)+"\n      ")]}}])}),a("el-table-column",{attrs:{label:"身份证","show-overflow-tooltip":!0},scopedSlots:l._u([{key:"default",fn:function(e){return[l._v("\n        "+l._s(e.row.idCard)+"\n      ")]}}])}),a("el-table-column",{attrs:{label:"性别","show-overflow-tooltip":!0},scopedSlots:l._u([{key:"default",fn:function(e){return[l._v("\n        "+l._s(0===e.row.sex?"男":"女")+"\n      ")]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:l._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit",circle:""},on:{click:function(e){return l.handleEdit(t.row)}}}),a("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(e){return l.handleDelete(t.row)}}})]}}])})],1),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"编辑用户",visible:l.isShowEdit},on:{"update:visible":function(e){l.isShowEdit=e}}},[a("el-form",{ref:"ruleForm",attrs:{model:l.addForm,"label-width":"80px",rules:l.rules,"label-position":"right"}},[a("el-form-item",{attrs:{label:"姓名",prop:"symbol"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:l.addForm.symbol,callback:function(e){l.$set(l.addForm,"symbol",e)},expression:"addForm.symbol"}})],1),a("el-form-item",{attrs:{label:"账号",prop:"tel"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:l.addForm.tel,callback:function(e){l.$set(l.addForm,"tel",e)},expression:"addForm.tel"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:l.addForm.password,callback:function(e){l.$set(l.addForm,"password",e)},expression:"addForm.password"}})],1),a("el-form-item",{attrs:{label:"微信号",prop:"wechat"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:l.addForm.wechat,callback:function(e){l.$set(l.addForm,"wechat",e)},expression:"addForm.wechat"}})],1),a("el-form-item",{attrs:{label:"身份证",prop:"idCard"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:l.addForm.idCard,callback:function(e){l.$set(l.addForm,"idCard",e)},expression:"addForm.idCard"}})],1),a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择性别"},model:{value:l.addForm.sex,callback:function(e){l.$set(l.addForm,"sex",e)},expression:"addForm.sex"}},[a("el-option",{attrs:{label:"男",value:0}}),a("el-option",{attrs:{label:"女",value:1}})],1)],1),a("el-form-item",{attrs:{label:"角色",prop:"role"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择性别"},model:{value:l.addForm.role,callback:function(e){l.$set(l.addForm,"role",e)},expression:"addForm.role"}},[a("el-option",{attrs:{label:"前台",value:"前台"}}),a("el-option",{attrs:{label:"管理员",value:"管理员"}}),a("el-option",{attrs:{label:"店铺销售",value:"店铺销售"}}),a("el-option",{attrs:{label:"施工人员",value:"施工人员"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){l.isShowEdit=!1}}},[l._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:l.handleChange}},[l._v("确 定")])],1)],1)],1)},[],!1,null,null,null);"function"==typeof p&&p(m);t.default=m.exports}}]);